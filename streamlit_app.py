import streamlit as st
from streamlit_option_menu import option_menu
import datetime

# ì•± ê¸°ë³¸ ì„¤ì •
st.set_page_config(page_title="í•™êµ ì»¤ë®¤ë‹ˆí‹°", layout="wide")

# ìƒë‹¨ ë©”ë‰´
selected = option_menu(
    menu_title=None,
    options=["ì»¤ë®¤ë‹ˆí‹°", "ì‹œê°„í‘œ", "ê¸‰ì‹í‘œ", "ê³µì§€ì‚¬í•­", "ë‚´ ì •ë³´"],
    icons=["chat-dots", "calendar-week", "utensils", "megaphone", "person-circle"],
    menu_icon="cast",
    default_index=0,
    orientation="horizontal",
)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 1ï¸âƒ£ ì»¤ë®¤ë‹ˆí‹°
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if selected == "ì»¤ë®¤ë‹ˆí‹°":
    st.title("ğŸ“¢ ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ")
    st.subheader("ììœ ë¡­ê²Œ ì˜ê²¬ì„ ë‚˜ëˆ ë³´ì„¸ìš”!")

    # ê¸€ ëª©ë¡ ì €ì¥ìš© ì„¸ì…˜
    if "posts" not in st.session_state:
        st.session_state["posts"] = []

    # ê¸€ì“°ê¸°
    with st.form("new_post_form"):
        author = st.text_input("ì‘ì„±ì ì´ë¦„")
        content = st.text_area("ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”")
        submit_post = st.form_submit_button("ê²Œì‹œí•˜ê¸°")

        if submit_post and author and content:
            post = {
                "author": author,
                "content": content,
                "time": datetime.datetime.now().strftime("%Y-%m-%d %H:%M")
            }
            st.session_state["posts"].insert(0, post)
            st.success("ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!")

    st.divider()
    st.write("### ğŸ“„ ê²Œì‹œê¸€ ëª©ë¡")
    for post in st.session_state["posts"]:
        st.markdown(f"**{post['author']}** | ğŸ•’ {post['time']}")
        st.write(post["content"])
        st.write("---")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 2ï¸âƒ£ ì‹œê°„í‘œ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
elif selected == "ì‹œê°„í‘œ":
    st.title("ğŸ“… í•™ê¸‰ë³„ ì‹œê°„í‘œ")

    grade = st.selectbox("í•™ë…„ ì„ íƒ", [1, 2, 3])
    classroom = st.selectbox("ë°˜ ì„ íƒ", [1, 2, 3, 4, 5, 6, 7, 8, 9])

    # ì˜ˆì‹œ ë°ì´í„° (ë‚˜ì¤‘ì— CSVë‚˜ DBë¡œ êµì²´ ê°€ëŠ¥)
    timetable = {
        (1, 1): ["êµ­ì–´", "ìˆ˜í•™", "ì˜ì–´", "ì²´ìœ¡", "ì—­ì‚¬", "ê³¼í•™", "ë¯¸ìˆ "],
        (2, 3): ["ë¬¼ë¦¬", "í™”í•™", "ìˆ˜í•™", "ì˜ì–´", "êµ­ì–´", "ì²´ìœ¡", "ìŒì•…"],
        (3, 2): ["í”„ë¡œê·¸ë˜ë°", "ìˆ˜í•™", "AI", "êµ­ì–´", "ì˜ì–´", "ì§„ë¡œ", "ì²´ìœ¡"]
    }

    if (grade, classroom) in timetable:
        st.table({f"{i+1}êµì‹œ": [timetable[(grade, classroom)][i]] for i in range(7)})
    else:
        st.warning("ì•„ì§ ì‹œê°„í‘œê°€ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 3ï¸âƒ£ ê¸‰ì‹í‘œ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
elif selected == "ê¸‰ì‹í‘œ":
    st.title("ğŸ± ì˜¤ëŠ˜ì˜ ê¸‰ì‹")

    today = datetime.date.today()
    st.write(f"ğŸ“… {today.strftime('%Y-%m-%d')} ê¸‰ì‹í‘œ")

    # (ì‹¤ì œ NEIS API ì—°ë™ ê°€ëŠ¥, ì§€ê¸ˆì€ ì˜ˆì‹œ)
    sample_menu = ["ìŒ€ë°¥", "ëœì¥êµ­", "ì¹˜í‚¨ê°€ë¼ì•„ê²Œ", "ì˜¤ì´ë¬´ì¹¨", "ê¹€ì¹˜"]
    st.write("ğŸ½ï¸ " + " / ".join(sample_menu))

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 4ï¸âƒ£ ê³µì§€ì‚¬í•­
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
elif selected == "ê³µì§€ì‚¬í•­":
    st.title("ğŸ“¢ ê³µì§€ì‚¬í•­")
    st.info("ì•„ì§ ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 5ï¸âƒ£ ë‚´
